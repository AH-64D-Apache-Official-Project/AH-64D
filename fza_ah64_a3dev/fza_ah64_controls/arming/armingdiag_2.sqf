_heli = _this select 0;
fza_ah64_curwepsel = 0;
fza_ah64_weppoint1 = 0;
fza_ah64_weppoint2 = 0;
fza_ah64_weppoint3 = 0;
fza_ah64_weppoint4 = 0;
fza_ah64_canmag = 1;
fza_ah64_hardpoint1 = -1;
fza_ah64_hardpoint2 = -1;
fza_ah64_hardpoint3 = -1;
fza_ah64_hardpoint4 = -1;
fza_ah64_hardpoint5 = -1;
fza_ah64_hardpoint1_ord1 = "NONE";
fza_ah64_hardpoint1_ord2 = "NONE";
fza_ah64_hardpoint1_ord3 = "NONE";
fza_ah64_hardpoint1_ord4 = "NONE";
fza_ah64_hardpoint2_ord1 = "NONE";
fza_ah64_hardpoint2_ord2 = "NONE";
fza_ah64_hardpoint2_ord3 = "NONE";
fza_ah64_hardpoint2_ord4 = "NONE";
fza_ah64_hardpoint3_ord1 = "NONE";
fza_ah64_hardpoint3_ord2 = "NONE";
fza_ah64_hardpoint3_ord3 = "NONE";
fza_ah64_hardpoint3_ord4 = "NONE";
fza_ah64_hardpoint4_ord1 = "NONE";
fza_ah64_hardpoint4_ord2 = "NONE";
fza_ah64_hardpoint4_ord3 = "NONE";
fza_ah64_hardpoint4_ord4 = "NONE";
fza_ah64_hardpoint5_ord1 = "NONE";
fza_ah64_hardpoint5_ord2 = "NONE";
fza_ah64_hardpoint5_ord3 = "NONE";
fza_ah64_hardpoint5_ord4 = "NONE";
fza_ah64_misidx = "-";

if(isNil "fza_ah64_m261pod_qty") then {fza_ah64_m261pod_qty = 999;};
if(isNil "fza_ah64_m299rack_qty") then {fza_ah64_m299rack_qty = 999;};
if(isNil "fza_ah64_agm114a_qty") then {fza_ah64_agm114a_qty = 999;};
if(isNil "fza_ah64_agm114b_qty") then {fza_ah64_agm114b_qty = 999;};
if(isNil "fza_ah64_agm114c_qty") then {fza_ah64_agm114c_qty = 999;};
if(isNil "fza_ah64_agm114f_qty") then {fza_ah64_agm114f_qty = 999;};
if(isNil "fza_ah64_agm114k_qty") then {fza_ah64_agm114k_qty = 999;};
if(isNil "fza_ah64_agm114l_qty") then {fza_ah64_agm114l_qty = 999;};
if(isNil "fza_ah64_agm114m_qty") then {fza_ah64_agm114m_qty = 999;};
if(isNil "fza_ah64_agm114n_qty") then {fza_ah64_agm114n_qty = 999;};
if(isNil "fza_ah64_agm114r_qty") then {fza_ah64_agm114r_qty = 999;};
if(isNil "fza_ah64_m151_qty") then {fza_ah64_m151_qty = 999;};
if(isNil "fza_ah64_m229_qty") then {fza_ah64_m229_qty = 999;};
if(isNil "fza_ah64_m261_qty") then {fza_ah64_m261_qty = 999;};
if(isNil "fza_ah64_m255_qty") then {fza_ah64_m255_qty = 999;};
if(isNil "fza_ah64_m257_qty") then {fza_ah64_m257_qty = 999;};
if(isNil "fza_ah64_m156_qty") then {fza_ah64_m156_qty = 999;};
if(isNil "fza_ah64_fim92_qty") then {fza_ah64_fim92_qty = 999;};
if(isNil "fza_ah64_30mmhedp_qty") then {fza_ah64_30mmhedp_qty = 99999;};
if(isNil "fza_ah64_auxtank_qty") then {fza_ah64_auxtank_qty = 999;};

_helipic = "\fza_ah64_controls\arming\ah64db2.paa";
if(typeof _heli == "fza_ah64a_l" || typeof _heli == "fza_ah64a_e") then {_helipic = "\fza_ah64_controls\arming\ah64a.paa";};
if(typeof _heli == "fza_ah64d_b2e" || typeof _heli == "fza_ah64d_b2exp" || typeof _heli == "fza_ah64d_b3") then {_helipic = "\fza_ah64_controls\arming\ah64db2.paa";};
if(typeof _heli == "fza_ah64d_b2e_nr" || typeof _heli == "fza_ah64d_b2exp_nr" || typeof _heli == "fza_ah64d_b3_nr") then {_helipic = "\fza_ah64_controls\arming\ah64db2nr.paa";};
_fza_ah64_arming2 = createdialog "fza_ah64_loadout2";
_m299 = lbAdd [103, "M299"];
lbSetPicture [103, 0, "\fza_ah64_controls\arming\m299_icn.paa"];
lbSetPictureColor [103, 0,[1,1,1,1]];
_m251pod = lbAdd [103, "M261"];
lbSetPicture [103, 1, "\fza_ah64_controls\arming\m261pod_icn.paa"];
lbSetPictureColor [103, 1,[1,1,1,1]];
_agm114a = lbAdd [103, "AGM-114A"];
lbSetPicture [103, 2, "\fza_ah64_controls\arming\agm114a_icn.paa"];
lbSetPictureColor [103, 2,[1,1,1,1]];
_agm114c = lbAdd [103, "AGM-114C"];
lbSetPicture [103, 3, "\fza_ah64_controls\arming\agm114c_icn.paa"];
lbSetPictureColor [103, 3,[1,1,1,1]];
_agm114k = lbAdd [103, "AGM-114K"];
lbSetPicture [103, 4, "\fza_ah64_controls\arming\agm114k_icn.paa"];
lbSetPictureColor [103, 4,[1,1,1,1]];
_agm114l = lbAdd [103, "AGM-114L"];
lbSetPicture [103, 5, "\fza_ah64_controls\arming\agm114l_icn.paa"];
lbSetPictureColor [103, 5,[1,1,1,1]];
_agm114m = lbAdd [103, "AGM-114M"];
lbSetPicture [103, 6, "\fza_ah64_controls\arming\agm114m_icn.paa"];
lbSetPictureColor [103, 6,[1,1,1,1]];
_agm114n = lbAdd [103, "AGM-114N"];
lbSetPicture [103, 7, "\fza_ah64_controls\arming\agm114n_icn.paa"];
lbSetPictureColor [103, 7,[1,1,1,1]];
_m151 = lbAdd [103, "M151"];
lbSetPicture [103, 8, "\fza_ah64_controls\arming\m151_icn.paa"];
lbSetPictureColor [103, 8,[1,1,1,1]];
_m229 = lbAdd [103, "M229"];
lbSetPicture [103, 9, "\fza_ah64_controls\arming\m229_icn.paa"];
lbSetPictureColor [103, 9,[1,1,1,1]];
_m261 = lbAdd [103, "M261"];
lbSetPicture [103, 10, "\fza_ah64_controls\arming\m261_icn.paa"];
lbSetPictureColor [103, 10,[1,1,1,1]];
_m255 = lbAdd [103, "M255"];
lbSetPicture [103, 11, "\fza_ah64_controls\arming\m255_icn.paa"];
lbSetPictureColor [103, 11,[1,1,1,1]];
_m255 = lbAdd [103, "M257"];
lbSetPicture [103, 12, "\fza_ah64_controls\arming\m257_icn.paa"];
lbSetPictureColor [103, 12,[1,1,1,1]];
_atas = lbAdd [103, "ATAS"];
lbSetPicture [103, 13, "\fza_ah64_controls\arming\atas_icn.paa"];
lbSetPictureColor [103, 13,[1,1,1,1]];
_auxtank = lbAdd [103, "AUX"];
lbSetPicture [103, 14, "\fza_ah64_controls\arming\aux_icn.paa"];
lbSetPictureColor [103, 14,[1,1,1,1]];
buttonsetaction [109,"ctrlsettext [104,(lbPicture [103, (lbcursel 103)])]; fza_ah64_curwepsel = (lbcursel 103);"];
buttonsetaction [105,"ctrlsettext [105,fza_ah64_misidx];"];
buttonsetaction [117,"ctrlsettext [117,fza_ah64_misidx];"];
buttonsetaction [107,"ctrlsettext [107,fza_ah64_misidx];"];
buttonsetaction [108,"ctrlsettext [108,fza_ah64_misidx];"];
ctrlsettext [101,_helipic];

while {(dialog)} do
{
if(lbcursel 103 == 0) then {ctrlsettext [110,"The M299 digital HELLFIRE launch rack is available to the AH-64D only. It is capable of launching all HELLFIRE types, including the Longbow HELLFIRE." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m299rack_qty])];};
if(lbcursel 103 == 1) then {ctrlsettext [110,"The M261 2.75 inch rocket pod mounts 19 rockets. It is a lightweight aluminum and is good for several uses. The AH-64 can separate the launch tubes into three zones." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m261pod_qty])];};
if(lbcursel 103 == 2) then {fza_ah64_misidx = "A"; ctrlsettext [110,"The AGM-114A HELLFIRE is a semi-active laser guided missile with an effective range out to 7km. The A variant was the first built, capable of destroying non-reactive armor threats." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_agm114a_qty])];};
if(lbcursel 103 == 3) then {fza_ah64_misidx = "C"; ctrlsettext [110,"The AGM-114C HELLFIRE is a semi-active laser guided missile with an effective range out to 7km. The C variant introduced an improved motor, seeker, and autopilot over the A variant." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_agm114c_qty])];};
if(lbcursel 103 == 4) then {fza_ah64_misidx = "K"; ctrlsettext [110,"The AGM-114K HELLFIRE II is a semi-active laser guided missile with an effective range out to 7km. This is the most advanced model of all the laser guided HELLFIRES available." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_agm114k_qty])];};
if(lbcursel 103 == 5) then {fza_ah64_misidx = "L"; ctrlsettext [110,"The AGM-114L Longbow HELLFIRE is one of the most advanced anti-tank missiles in the world. Radar guided, it is capable of hitting targets out to 8km and can destroy any known armored vehicle in existence." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_agm114l_qty])];};
if(lbcursel 103 == 6) then {fza_ah64_misidx = "M"; ctrlsettext [110,"The AGM-114M HELLFIRE II is identical to the K variant, but the anti-tank warhead is replaced by a blast-fragmentation warhead. It is ideal for soft targets." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_agm114m_qty])];};
if(lbcursel 103 == 7) then {fza_ah64_misidx = "N"; ctrlsettext [110,"The AGM-114N HELLFIRE II is identical to the K variant, but the anti-tank warhead is replaced by a thermobaric warhead. It is very deadly when used against hardened targets." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_agm114n_qty])];};
if(lbcursel 103 == 8) then {fza_ah64_misidx = "151"; ctrlsettext [110,"The M151 warhead is a 10 pound warhead with a pre-fragmented shell. It is effective against light armored vehicles and personnel. It is mounted to a Mark 66 Mod 6 rocket motor with an effective range of 5km." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m151_qty])];};
if(lbcursel 103 == 9) then {fza_ah64_misidx = "229"; ctrlsettext [110,"The M229 warhead is a 17 pound warhead with a pre-fragmented shell. It is more effective against heavier armored vehicles and personnel than the M151, at a cost of slightly reduced range. It is mounted to a Mark 66 Mod 6 rocket motor with an effective range of 4.5km." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m229_qty])];};
if(lbcursel 103 == 10) then {fza_ah64_misidx = "261"; ctrlsettext [110,"The M261 warhead is a submunition rocket with 9 parachute-retarded munitions. These are effective against both personnel and light armored vehicles. It is mounted to a Mark 66 Mod 6 rocket motor with an effective range of 5km." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m261_qty])];};
if(lbcursel 103 == 11) then {fza_ah64_misidx = "255"; ctrlsettext [110,"The M255 warhead is a submunition rocket with over 1000 60 grain flechettes. These are effective against personnel with moderate effectiveness against unarmored vehicles. It is mounted to a Mark 66 Mod 6 rocket motor with an effective range of 5km." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m255_qty])];};
if(lbcursel 103 == 12) then {fza_ah64_misidx = "257"; ctrlsettext [110,"The M257 is an illumination warhead containing a parachute flare. It can illuminate an area of a square kilometer for approximately 100 seconds. It is mounted to a Mark 66 Mod 6 rocket motor with an effective range of 3.5km." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_m257_qty])];};
if(lbcursel 103 == 13) then {ctrlsettext [110,"ATAS, or Air to Air Stinger, is an aerial launching platform for the FIM-92 Stinger missile. It mounts two Stinger missiles. The AH-64 helicopter series has provisions for mounting ATAS on the wingtips." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_fim92_qty])];};
if(lbcursel 103 == 14) then {ctrlsettext [110,"The auxiliary tanks used by the AH-64 contain 230 gallons of fuel. This is about 62 percent of the internal fuel capacity, so these tanks can be very useful for extending endurance. The AH-64 can mount up to four." + "\nQUANTITY AVAILABLE: " + (format ["%1",fza_ah64_auxtank_qty])];};
if(fza_ah64_canmag == 1) then {ctrlsettext [116,"1200"];};
if(fza_ah64_canmag == 2) then {ctrlsettext [116,"300"];};
if(fza_ah64_canmag == 0) then {ctrlsettext [116,"0"];};
if(fza_ah64_canmag > 2) then {fza_ah64_canmag = 0;};
if(fza_ah64_curwepsel == 1 && lbcursel 103 < 8) then {fza_ah64_misidx = "ERR";};
if(fza_ah64_curwepsel == 0 && lbcursel 103 > 7) then {fza_ah64_misidx = "ERR";};
if(fza_ah64_curwepsel == 1) then {ctrlsettext [108,"-"];};
if(fza_ah64_curwepsel > 1) then {{ctrlsettext [_x,"-"];} foreach [105,117,107,108]; fza_ah64_misidx = "-";};
fza_ah64_weppoint1 = (ctrltext 105);
fza_ah64_weppoint2 = (ctrltext 107);
fza_ah64_weppoint3 = (ctrltext 117);
fza_ah64_weppoint4 = (ctrltext 108);
sleep 0.03;
};